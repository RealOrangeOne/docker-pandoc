version: 2
jobs:
    build:
        docker:
            - image: circleci/python:3-stretch
        working_directory: ~/tex-template
        steps:
            - checkout
            - setup_remote_docker
            - run:
                name: Install Docker Compose
                command: |
                  curl -L https://github.com/docker/compose/releases/download/1.21.0/docker-compose-`uname -s`-`uname -m` > ~/docker-compose
                  chmod +x ~/docker-compose
                  sudo mv ~/docker-compose /usr/local/bin/docker-compose
            - run: docker-compose build
            - run: docker-compose run main pandoc /app/README.md -o /app/readme.pdf
            - store_artifacts:
                path: readme.pdf
                destination: readme.pdf
